<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wang.dao.MeetingDao" >

    <resultMap id="BaseResultMap" type="com.wang.entity.Meeting" >

        <result column="openId" property="openId" jdbcType="VARCHAR" />
        <result column="meetingname" property="meetingname" jdbcType="VARCHAR" />
        <result column="meetingaddr" property="meetingaddr" jdbcType="VARCHAR" />
        <result column="meetingtime" property="meetingtime" jdbcType="VARCHAR" />
        <result column="meetinginfo" property="meetinginfo" jdbcType="VARCHAR" />
        <result column="regtime" property="regtime" jdbcType="VARCHAR" />
        <result column="remark" property="remark" jdbcType="VARCHAR" />
        <result column="isdel" property="isdel" jdbcType="VARCHAR" />
    </resultMap>


    <select id="selectMeetingby" resultMap="BaseResultMap" parameterType="com.wang.entity.Meeting">
        select  *
        from meeting where openId = #{openId,jdbcType=VARCHAR} and meetingname = #{meetingname,jdbcType=VARCHAR}
    </select>

    <insert id="insertMeeting" parameterType="com.wang.entity.Meeting" >
        INSERT INTO meeting (openId,meetingname ,meetingaddr,meetingtime,meetinginfo,regtime,remark,isdel)
        SELECT
        #{openId},
        #{meetingname},
        #{meetingaddr},
        #{meetingtime},
        #{meetinginfo},
        #{regtime},
        #{remark},
        #{isdel}
        FROM DUAL WHERE NOT EXISTS (SELECT id FROM  meeting WHERE openId = #{openId,jdbcType=VARCHAR} and meetingname = #{meetingname,jdbcType=VARCHAR})
    </insert>




</mapper>

