<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wang.dao.WXuserDao" >

    <resultMap id="BaseResultMap" type="com.wang.entity.WXuser" >
        <result column="username" property="username" jdbcType="VARCHAR" />
        <result column="password" property="password" jdbcType="VARCHAR" />
        <result column="openId" property="openId" jdbcType="VARCHAR" />
        <result column="nickname" property="nickname" jdbcType="VARCHAR" />
        <result column="sex" property="sex" jdbcType="VARCHAR" />
        <result column="country" property="country" jdbcType="VARCHAR" />
        <result column="province" property="province" jdbcType="VARCHAR" />
        <result column="city" property="city" jdbcType="VARCHAR" />
        <result column="headImgUrl" property="headImgUrl" jdbcType="VARCHAR" />
        <result column="headpic" property="headpic" jdbcType="VARCHAR" />
        <result column="truename" property="truename" jdbcType="VARCHAR" />
        <result column="tel" property="tel" jdbcType="VARCHAR" />
        <result column="addr" property="addr" jdbcType="VARCHAR" />
        <result column="company" property="company" jdbcType="VARCHAR" />
        <result column="email" property="email" jdbcType="VARCHAR" />
        <result column="regtime" property="regtime" jdbcType="VARCHAR" />
        <result column="lastlogtime" property="lastlogtime" jdbcType="VARCHAR" />
        <result column="remark" property="remark" jdbcType="VARCHAR" />
        <result column="addr" property="addr" jdbcType="VARCHAR" />
        <result column="isdel" property="isdel" jdbcType="VARCHAR" />
    </resultMap>



    <select id="updateWXuser" parameterType="com.wang.entity.WXuser" >
        UPDATE wx_user SET tel=#{tel} , company=#{company}  ,  truename=#{truename} WHERE  openId=#{openId,jdbcType=VARCHAR};
    </select>


    <insert id="insertWXuser" parameterType="com.wang.entity.WXuser" >
        INSERT INTO wx_user (openId,nickname ,sex,country,province,city,headImgUrl,regtime,lastlogtime,remark,isdel)
        SELECT
        #{openId},
        #{nickname},
        #{sex},
        #{country},
        #{province},
        #{city},
        #{headImgUrl},
        #{regtime},
        #{lastlogtime},
        #{remark},
        #{isdel}
        FROM DUAL WHERE NOT EXISTS (SELECT id FROM  wx_user WHERE openId = #{openId,jdbcType=VARCHAR})
    </insert>




</mapper>

